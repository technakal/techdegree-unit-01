<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: script.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: script.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*******************************************
Treehouse Techdegree:
FSJS project 1 - A Random Quote Generator
******************************************/

/**
 * Returns a random number between two specified values.
 * @param {number} min - The lower boundary of possible numbers.
 * @param {number} max - The upper boundary of possible numbers.
 */
const getRandomNumber = (min, max) => {
  return Math.floor(Math.random() * max + min);
};

/**
 * Represents a single quote.
 * @constructor
 * @param {string} quote - The text of the quote.
 * @param {string} source - Attribution for the quote.
 * @param {string} category - Branch of knowledge the quote belongs to.
 * @param {string} citation - Where the quote was originally recorded. Optional.
 * @param {date} year - The year the quote was recorded. Optional.
 */
class Quote {
  constructor(quote, source, category, citation = '', year = '') {
    this.id = getRandomNumber(1, 1000);
    this.quote = quote;
    this.source = source;
    this.citation = citation;
    this.year = year;
    this.category = category.toLowerCase();
    this.used = false;
  }

  /**
   * Controls whether the interface has displayed the quote to the user during this session.
   * Used to prevent quotes from displaying repetitively.
   */
  toggleUsed() {
    this.used = !this.used;
    return this.used;
  }

  /**
   * Formats the quote into a template literal for display on the DOM.
   */
  formatQuote() {
    return `
    &lt;div class="quote-category">
      &lt;p>${this.category}&lt;/p>
    &lt;/div>
    &lt;p class="quote">${this.quote}&lt;/p>
    &lt;p class="source">${this.source}
      ${this.citation ? `&lt;span class="citation">${this.citation}&lt;/span>` : ''}
      ${this.year ? `&lt;span class="year">${this.year}&lt;/span>` : ''}
    &lt;/p>
  `;
  }
}

/**
 * Represents a color palette.
 * @constructor
 * @param {string} main - The primary color of the palette.
 * @param {string} accent - The secondary color of the palette.
 * @param {string} font - The font color of the palette.
 * @param {string} bold - The brightest, boldest color of the palette. Typical substitute for white.
 */
class ColorTheme {
  constructor(main, accent, font, bold) {
    this.main = main;
    this.accent = accent;
    this.font = font;
    this.bold = bold;
  }

  /**
   * Updates the UI interface to use the color palette.
   */
  updateColorScheme() {
    let root = document.documentElement;
    root.style.setProperty('--color-main', this.main);
    root.style.setProperty('--color-accent', this.accent);
    root.style.setProperty('--color-font', this.font);
    root.style.setProperty('--color-bold', this.bold);
  }
}

const quoteBoxElement = document.getElementById('quote-box');
const quoteButtonElement = document.getElementById('loadQuote');
const categoryContainer = document.getElementById('container-category');
quoteButtonElement.addEventListener('click', event => handleClick(event));

let selectedCategory;

const quotes = [
  new Quote(
    'We can all fight against loneliness by engaging in random acts of kindness.',
    'Gail Honeyman',
    'kindness'
  ),
  new Quote(
    'In certain kinds of writing, particularly in art criticism and literary criticism, it is normal to come across long passages which are almost completely lacking in meaning.',
    'George Orwell',

    'writing',
    'Politics and the English Language',
    1946
  ),
  new Quote(
    "Newton's laws of physics can rarely be applied to the real world. There is more to life than cause and effect. Things just aren't that simple.",
    'Amy Zhang',
    'science'
  ),
  new Quote(
    'Science is a beautiful gift to humanity; we shoudl not distort it.',
    'A. P. J. Abdul Kalam',
    'science'
  ),
];

/**
 * Theme array, used for randomly selecting a new color palette for the UI.
 */
const backgroundThemes = [
  new ColorTheme('#FFF4B2', '#EA6B59', '#31384B', '#FDF1EF'),
  new ColorTheme('#EA6B59', '#04B28A', '#FDF1EF', '#31384B'),
  new ColorTheme('#04B28A', '#EA6B59', '#FFF4B2', '#FFF4B2'),
  new ColorTheme('#31384B', '#EA6B59', '#FDF1EF', '#FFF4B2'),
];

/**
 * Retrieves all categories from the passed array.
 * @param {array} arr - The quotes array. Must have category property on each item.
 */
const getCategories = arr => {
  return arr.map(elem => elem.category).sort((a, b) => a > b);
};

/**
 * Ensures each category in the categories array only appears once.
 * @param {array} arr - The array of categories to be reduced.
 * credit to @ChrisFerdinandi for the assist on this.(https:/**gomakethings.com/removing-duplicates-from-an-array-with-vanilla-javascript/).
 */
const getUniqueCategories = arr => {
  return arr.filter((item, index) => arr.indexOf(item) >= index);
};

/**
 * Formats each category in the categories array into a button, then appends to the DOM.
 * @param {array} categories - The array of categories to be appended to the UI.
 */
const displayCategories = categories => {
  let categoryButtonElements = categories.map(
    category => `
      &lt;button id="${category}" class="button-category">${category}&lt;/button>
    `
  );
  categoryButtonElements.push(
    `&lt;button id="clear" class="button-category">Ã—&lt;/button>`
  );
  categoryContainer.innerHTML = categoryButtonElements.join('');
  return document.querySelectorAll('.button-category');
};

let categoryButtons = displayCategories(
  getUniqueCategories(getCategories(quotes))
);

categoryButtons.forEach(button =>
  button.addEventListener('click', event => handleClick(event))
);

/**
 * Updates the selectedCategory element to match the user selected category.
 * @param {string} category
 */
const setCategory = category => {
  if (selectedCategory) {
    let currentCategory = document.getElementById(selectedCategory);
    currentCategory.classList.remove('active');
  }
  if (category.id === 'clear') {
    clearCategory();
    return;
  }
  selectedCategory = category.id;
  category.classList.add('active');
};

/**
 * Clears the selectedCategory so that all quotes are available for display.
 */
const clearCategory = () => (selectedCategory = undefined);

/**
 * Returns one quote from the quotes array. Also flags the quote as "used".
 * @param {array} arr - The quotes array.
 * @param {number} index - The index of the element to be returned.
 */
const getRandomQuote = (arr, index) => {
  arr[index].toggleUsed();
  return arr[index];
};

/**
 * Filters out used quotes so that only new ones will display.
 * If no new quotes are available, recycles the quotes.
 * @param {array} arr - The quotes array.
 */
const filterUsed = arr => {
  let filteredQuotes = arr.filter(elem => elem.used === false);
  if (filteredQuotes.length === 0) {
    resetQuotes(arr);
    return arr;
  }
  return filteredQuotes;
};

/**
 * Returns only quotes belonging to the category indicated by the user.
 * @param {array} arr - The quotes array.
 * @param {string} category - The user-selected category to filter upon.
 */
const filterByCategory = (arr, category) => {
  if (category) {
    return arr.filter(elem => elem.category === category);
  }
  return arr;
};

/**
 * Allows quotes to be reused because all quotes have already been used.
 * @param {array} arr - The quotes array.
 */
const resetQuotes = arr => {
  arr.forEach(quote => (quote.used = false));
  return true;
};

/**
 * Retrieves one random quote from the passed array. Formats the quote into a template literal and outputs to the DOM.
 * @param {array} arr - The quotes array.
 */
const printQuote = arr => {
  const randomQuote = getRandomQuote(arr, getRandomNumber(0, arr.length));
  let quoteString = randomQuote.formatQuote();
  quoteBoxElement.innerHTML = quoteString;
};

/** TODO: rework background color setup so that it can transition more smoothly. */
/**
 * Selects the color palette at the passed index and triggers the updateColorScheme() method on that element.
 * @param {number} index - The index position.
 */
const changeColorScheme = index => {
  backgroundThemes[index].updateColorScheme();
  return;
};

/** TODO: create onPageLoad method. */

/**
 * Handles button clicks.
 * If the event was on the loadQuote button, print a new quote to the DOM.
 * If the event was on one of the category buttons, set the selectedCategory.
 * @param {event} event - The triggering event.
 */
const handleClick = event => {
  if (event.target.id === 'loadQuote') {
    printQuote(filterUsed(filterByCategory(quotes, selectedCategory)));
    changeColorScheme(getRandomNumber(0, backgroundThemes.length));
    return;
  }
  setCategory(event.target);
  return;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ColorTheme.html">ColorTheme</a></li><li><a href="Quote.html">Quote</a></li></ul><h3>Global</h3><ul><li><a href="global.html#backgroundThemes">backgroundThemes</a></li><li><a href="global.html#changeColorScheme">changeColorScheme</a></li><li><a href="global.html#clearCategory">clearCategory</a></li><li><a href="global.html#displayCategories">displayCategories</a></li><li><a href="global.html#filterByCategory">filterByCategory</a></li><li><a href="global.html#filterUsed">filterUsed</a></li><li><a href="global.html#getCategories">getCategories</a></li><li><a href="global.html#getRandomNumber">getRandomNumber</a></li><li><a href="global.html#getRandomQuote">getRandomQuote</a></li><li><a href="global.html#getUniqueCategories">getUniqueCategories</a></li><li><a href="global.html#handleClick">handleClick</a></li><li><a href="global.html#printQuote">printQuote</a></li><li><a href="global.html#resetQuotes">resetQuotes</a></li><li><a href="global.html#setCategory">setCategory</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Nov 25 2018 09:20:10 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
